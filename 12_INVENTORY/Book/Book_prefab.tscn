[gd_scene load_steps=30 format=3 uid="uid://dyfif7fbf51gx"]

[ext_resource type="PackedScene" uid="uid://cgb4c1n0bj2at" path="res://12_INVENTORY/Book/Page_flip/page_flip_right.tscn" id="1_1pirv"]

[sub_resource type="GDScript" id="GDScript_ia7iy"]
script/source = "extends Node

@export var scale_in_hand = 1.10
@onready var control = $\"../..\"
@onready var pages_behaviour = $\"../Pages_Behaviour\"
var mouse_entered = false
var click = false
var offset
var size : float
var my_origin_parent : Node

var enable_it = true


func _ready():

	_global_datas._open_dialogue.connect(_disable_it)
	_global_datas._close_dialogue.connect(_enable_it)
	_global_datas._active_sonar.connect(_disable_it)
	_global_datas._disable_sonar.connect(_enable_it)
	
	size = control.scale.x
	my_origin_parent = control.get_parent()
	control.global_position.y = 1785
	
func _process(_delta):
	
	
	if !click:
		return
	
	var new_position = control.get_global_mouse_position() + offset
	new_position.x = clamp(control.global_position.x,control.global_position.x,control.global_position.x)
	new_position.y = clamp(new_position.y,1000,1785)
	control.global_position = new_position


	if !enable_it:
		return  
		
	# Change darker color
	var value = inverse_lerp(1000,1785,new_position.y)
	var valueD = lerp(0.05,0.5,value)
	
	RenderingServer.global_shader_parameter_set(\"isSubscene_value\", valueD)
		
func _input(event):
	
	
	#TO DRAG
	if !_global_datas.Player_lock_click == true:
		
		if Input.is_action_just_pressed(\"Click\") && mouse_entered:
			click = true
			_global_datas.Player_lock_click = true
			_scale_change(size * scale_in_hand)
			offset = control.transform.origin - control.get_global_mouse_position()
			_global_datas.OnDrag_start_position = offset
			pages_behaviour._show_new_pages()			
	#TO ZOOM	
	if click:
		
		#TO DROP
		if event is InputEventMouseButton:
			if event.button_index == MOUSE_BUTTON_LEFT and not event.pressed:
				_unselect_element()
	
				
func _scale_change(value):
	
	control.set_scale(Vector2(value,value))
	
func _enable_it():
	
	enable_it = true
	
func _disable_it():
	enable_it = false
	
func _unselect_element():
	
	click = false
	_global_datas.Player_lock_click = false
	_scale_change(size)
	_global_datas.using_board_disable.emit()
	control.reparent(my_origin_parent)
	Input.set_mouse_mode(Input.MOUSE_MODE_VISIBLE)
	#shadow.visible = false
	
	if control.global_position.y > 1200:
		control.global_position.y = 1785
		if !enable_it:
			return  
		RenderingServer.global_shader_parameter_set(\"isSubscene_value\", 0.5)
		pages_behaviour._show_new_pages()	
	else:
		control.global_position.y = 1000	
		if !enable_it:
			return  
		RenderingServer.global_shader_parameter_set(\"isSubscene_value\", 0.05)
		
	_global_datas.Cursor_mode.cursor_out()	
	#IF OUT OF WINDOWS
	
func _notification(what):
	#if what == NOTIFICATION_WM_FOCUS_IN:
	if what == NOTIFICATION_WM_MOUSE_EXIT:
		_unselect_element()
		
func _on_area_2d_mouse_entered():

	
	mouse_entered = true
	_global_datas.Cursor_mode.cursor_in()
	

func _on_area_2d_mouse_exited():
	mouse_entered = false
	_global_datas.Cursor_mode.cursor_out()



"

[sub_resource type="GDScript" id="GDScript_kbyc2"]
script/source = "extends Node


func _on_inside_book_area_area_shape_entered(area_rid, area, area_shape_index, local_shape_index):
	if !_global_datas.Player_lock_click:
		return
	if area.get_node_or_null(\"parent_to_book\") == null:
		return
	var element_to_parent = area.get_node(\"parent_to_book\")
		
	element_to_parent._parent_to_book(true)

func _on_inside_book_area_area_shape_exited(area_rid, area, area_shape_index, local_shape_index):
	if !_global_datas.Player_lock_click:
		return
	
	if area.get_node_or_null(\"parent_to_book\") == null:
		return
	var element_to_parent = area.get_node(\"parent_to_book\")	
	element_to_parent._parent_to_book(false)

"

[sub_resource type="GDScript" id="GDScript_o0vua"]
script/source = "extends Node
@onready var pages_all = $\"../Pages_all\"
@onready var page_flip_right = $\"../SubViewport/Page_flip_right\"
@onready var page_flip_left = $\"../SubViewport/Page_flip_left\"

@onready var thickness_behaviour = $\"../Page_thickness/thickness_behaviour\"


func _ready():
	
	_global_datas.flip_left_end.connect(_show_new_pages)

	_global_datas.Book_page_index = 0
	_global_datas.Book_pages = pages_all.get_children()
	_global_datas.Book_group = pages_all
	
	_close_all_page()
	_show_new_pages()
	

func _open_book_by_index():
	_close_all_page()
		
func _show_new_pages():
	
	_close_all_page()
	_global_datas.Book_pages[_global_datas.Book_page_index].visible = true	
	_show_fliping_page(\"right\",true)
	_show_fliping_page(\"left\",true)
	
	
func _close_all_page():

	for pages in _global_datas.Book_pages:
		pages.visible = false	
		var side_l : Node2D = pages.get_node(\"left\")
		var side_r : Node2D = pages.get_node(\"right\")
		side_l.visible = false
		side_r.visible = false
		
func _next_page():
		
	if _global_datas.Book_page_index < _global_datas.Book_pages.size()-1:
		_show_fliping_page(\"right\",false)
		_global_datas.Book_page_index += 1	
		page_flip_right.get_node(\"Anim\")._turn_page()
		_show_fliping_page(\"right\",true)
		thickness_behaviour.update_page_thickness(true)
		
func _previous_page():
	
	if _global_datas.Book_page_index > 0:
		_show_fliping_page(\"left\",false)
		_global_datas.Book_page_index -= 1	
		page_flip_left.get_node(\"Anim\")._turn_page()	
		_show_fliping_page(\"left\",true)
		thickness_behaviour.update_page_thickness(false)

func _show_fliping_page(value : String, show : bool):
	var pages = _global_datas.Book_pages[_global_datas.Book_page_index]	
	var side : Node2D = pages.get_node(value)
	side.visible = show
	


func _on_button_next_2_pressed():
	if _global_datas.Player_lock_click:
		return
	_next_page()
	

func _on_button_previous_page_pressed():
	if _global_datas.Player_lock_click:
		return
	_previous_page()
	
"

[sub_resource type="GDScript" id="GDScript_3lo8f"]
script/source = "extends Node

@onready var timer = $Timer
@onready var button_next_page = $\"../Button_Next_page\"
@onready var button_previous_page = $\"../Button_Previous_page\"


func _ready():
	_global_datas.lock_page.connect(_start_lock_page)
	
func _start_lock_page():
	timer.start()	
	button_next_page.disabled = true
	button_previous_page.disabled = true
	
	
func _on_timer_timeout():

	button_next_page.disabled = false
	button_previous_page.disabled = false
"

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_mfjj5"]
size = Vector2(513.781, 284.487)
expression = "vec2 n_uv = UV -0.5;
float d = length(n_uv);
float c = smoothstep(r,r + feather,d);
color = vec4(vec3(c),1.0);"

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_dha5o"]
constant = 0.001

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_or6xq"]
constant = 0.49

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_b35rm"]
input_name = "uv"

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_g2li8"]
function = 31

[sub_resource type="VisualShader" id="VisualShader_vkgi8"]
code = "shader_type canvas_item;
render_mode blend_mix;




void fragment() {
// Input:5
	vec2 n_out5p0 = UV;


// FloatConstant:4
	float n_out4p0 = 0.490000;


// FloatConstant:3
	float n_out3p0 = 0.001000;


	vec4 n_out2p0;
// Expression:2
	n_out2p0 = vec4(0.0, 0.0, 0.0, 0.0);
	{
		vec2 n_uv = n_out5p0 -0.5;
		float d = length(n_uv);
		float c = smoothstep(n_out4p0,n_out4p0 + n_out3p0,d);
		n_out2p0 = vec4(vec3(c),1.0);
	}


// FloatFunc:6
	float n_out6p0 = 1.0 - n_out2p0.x;


// Output:0
	COLOR.a = n_out6p0;


}
"
graph_offset = Vector2(-561.73, -38.1816)
mode = 1
flags/light_only = false
nodes/fragment/2/node = SubResource("VisualShaderNodeExpression_mfjj5")
nodes/fragment/2/position = Vector2(-500, 240)
nodes/fragment/2/size = Vector2(513.781, 284.487)
nodes/fragment/2/input_ports = "0,3,UV;1,0,r;2,0,feather;"
nodes/fragment/2/output_ports = "0,5,color;"
nodes/fragment/2/expression = "vec2 n_uv = UV -0.5;
float d = length(n_uv);
float c = smoothstep(r,r + feather,d);
color = vec4(vec3(c),1.0);"
nodes/fragment/3/node = SubResource("VisualShaderNodeFloatConstant_dha5o")
nodes/fragment/3/position = Vector2(-940, 360)
nodes/fragment/4/node = SubResource("VisualShaderNodeFloatConstant_or6xq")
nodes/fragment/4/position = Vector2(-1040, 240)
nodes/fragment/5/node = SubResource("VisualShaderNodeInput_b35rm")
nodes/fragment/5/position = Vector2(-860, 120)
nodes/fragment/6/node = SubResource("VisualShaderNodeFloatFunc_g2li8")
nodes/fragment/6/position = Vector2(185.323, 258.128)
nodes/fragment/connections = PackedInt32Array(3, 0, 2, 2, 4, 0, 2, 1, 5, 0, 2, 0, 2, 0, 6, 0, 6, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ptao0"]
shader = SubResource("VisualShader_vkgi8")

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_ridun"]
constant = 0.5

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_s5mjk"]
constant = 1.697

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_7sfkq"]
size = Vector2(724.789, 654.559)
expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_dqkhn"]
input_name = "color"

[sub_resource type="VisualShaderNodeTexture2DParameter" id="VisualShaderNodeTexture2DParameter_ql5gr"]
parameter_name = "Gradient"

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_psorf"]
source = 5

[sub_resource type="VisualShaderNodeStep" id="VisualShaderNodeStep_lcyls"]

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_7agdf"]
operator = 2

[sub_resource type="VisualShader" id="VisualShader_gjxlm"]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform sampler2D Gradient;



void fragment() {
// Input:5
	vec4 n_out5p0 = COLOR;


	vec4 n_out7p0;
// Texture2D:7
	n_out7p0 = texture(Gradient, UV);


// FloatConstant:3
	float n_out3p0 = 1.697000;


// FloatConstant:2
	float n_out2p0 = 0.500000;


	float n_out4p0;
// Expression:4
	n_out4p0 = 0.0;
	{
		const float DITHER_THRESHOLDS[16] ={
				1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
				13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
				4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
				16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
			};
			
		vec2 uv = FRAGCOORD.xy * n_out2p0;
		int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
		n_out4p0 = n_out3p0 - DITHER_THRESHOLDS[index];
	}


// Step:8
	float n_out8p0 = step(n_out7p0.x, n_out4p0);


// VectorOp:9
	vec3 n_out9p0 = vec3(n_out5p0.xyz) * vec3(n_out8p0);


// Output:0
	COLOR.rgb = n_out9p0;


}
"
graph_offset = Vector2(-2258.32, 435.042)
mode = 1
flags/light_only = false
nodes/fragment/2/node = SubResource("VisualShaderNodeFloatConstant_ridun")
nodes/fragment/2/position = Vector2(-1240, 420)
nodes/fragment/3/node = SubResource("VisualShaderNodeFloatConstant_s5mjk")
nodes/fragment/3/position = Vector2(-1240, 280)
nodes/fragment/4/node = SubResource("VisualShaderNodeExpression_7sfkq")
nodes/fragment/4/position = Vector2(-960, 280)
nodes/fragment/4/size = Vector2(724.789, 654.559)
nodes/fragment/4/input_ports = "0,0,In;1,0,Size;"
nodes/fragment/4/output_ports = "0,0,Dither_Node;"
nodes/fragment/4/expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"
nodes/fragment/5/node = SubResource("VisualShaderNodeInput_dqkhn")
nodes/fragment/5/position = Vector2(-480, -100)
nodes/fragment/6/node = SubResource("VisualShaderNodeTexture2DParameter_ql5gr")
nodes/fragment/6/position = Vector2(-1100, -100)
nodes/fragment/7/node = SubResource("VisualShaderNodeTexture_psorf")
nodes/fragment/7/position = Vector2(-600, 60)
nodes/fragment/8/node = SubResource("VisualShaderNodeStep_lcyls")
nodes/fragment/8/position = Vector2(-115.218, 134.555)
nodes/fragment/9/node = SubResource("VisualShaderNodeVectorOp_7agdf")
nodes/fragment/9/position = Vector2(140, -20)
nodes/fragment/connections = PackedInt32Array(2, 0, 4, 1, 3, 0, 4, 0, 6, 0, 7, 2, 7, 0, 8, 0, 4, 0, 8, 1, 5, 0, 9, 0, 8, 0, 9, 1, 9, 0, 0, 0)

[sub_resource type="Gradient" id="Gradient_bry6u"]
offsets = PackedFloat32Array(0.245675, 0.49827, 0.771626)
colors = PackedColorArray(0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_qa7kp"]
gradient = SubResource("Gradient_bry6u")
width = 1024

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5alcy"]
shader = SubResource("VisualShader_gjxlm")
shader_parameter/Gradient = SubResource("GradientTexture1D_qa7kp")

[sub_resource type="GDScript" id="GDScript_pixat"]
script/source = "extends Node

@onready var left = $\"../left\"
@onready var right = $\"../right\"
var left_thickness : Array
var right_thickness : Array

var left_thickness_index : int = 0
var right_thickness_index : int = 6

func _ready():
	
	left_thickness = left.get_children()
	right_thickness = right.get_children()
	
	_close_all()

	


func update_right_flip():
	#print(\"right_thickness_index\",left_thickness_index)
		
	_show_thickness(left_thickness,left_thickness_index,true)
	
func update_left_flip():

	#print(\"left_thickness_index\",right_thickness_index)	
	_show_thickness(right_thickness,right_thickness_index,true)
	

func _update_connect():
	
	if _global_datas.flip_left_end.is_connected(update_right_flip):
		_global_datas.flip_left_end.disconnect(update_right_flip)
	if _global_datas.flip_left_end.is_connected(update_left_flip):
		_global_datas.flip_left_end.disconnect(update_left_flip)
						
func update_page_thickness(right_condition : bool):
	
	
	
	
	if right_condition: 
		_update_connect()
		_show_thickness(right_thickness,right_thickness_index,false)
		_global_datas.flip_left_end.connect(update_right_flip)
		left_thickness_index +=1
		right_thickness_index -=1
			
	else: 
		_update_connect()
		_show_thickness(left_thickness,left_thickness_index,false)
		_global_datas.flip_left_end.connect(update_left_flip)
		left_thickness_index -=1
		right_thickness_index +=1
		
	
	
	
func _close_all():
	
	for borders_left in left_thickness:
		borders_left.visible = false	
		
	for borders_right in right_thickness:
		borders_right.visible = false	

func _show_thickness(list : Array, index : int, show : bool):
	var thicknes = list[index-1]	
	thicknes.visible = show
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jrkpn"]

[sub_resource type="ViewportTexture" id="ViewportTexture_sbgpn"]
viewport_path = NodePath("SubViewport")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1sju8"]
size = Vector2(156, 76.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5xv1b"]
size = Vector2(890, 456)

[node name="Book" type="Node2D"]
position = Vector2(0, -421)

[node name="Slide" type="Node" parent="."]
script = SubResource("GDScript_ia7iy")
scale_in_hand = 1.05

[node name="Parent_to_book" type="Node" parent="."]
script = SubResource("GDScript_kbyc2")

[node name="Pages_Behaviour" type="Node" parent="."]
script = SubResource("GDScript_o0vua")

[node name="WaitforTurn_page" type="Node" parent="."]
script = SubResource("GDScript_3lo8f")

[node name="Timer" type="Timer" parent="WaitforTurn_page"]
wait_time = 0.1

[node name="ColorRect3" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_ptao0")
offset_left = -81.0
offset_top = -358.0
offset_right = -1.0
offset_bottom = -278.0
scale = Vector2(2, 2)
mouse_filter = 2
color = Color(0.4, 0.364706, 0.223529, 1)

[node name="ColorRect4" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_ptao0")
offset_left = -72.0
offset_top = -346.0
offset_right = 8.00001
offset_bottom = -266.0
scale = Vector2(1.78756, 1.78756)
mouse_filter = 2
color = Color(0.0585938, 0.140625, 0.144531, 1)

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -608.0
offset_top = -284.0
offset_right = 623.0
offset_bottom = 383.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="ColorRect2" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_5alcy")
offset_left = -596.0
offset_top = -284.0
offset_right = 612.0
offset_bottom = 383.0
mouse_filter = 2
color = Color(0.341176, 0.313726, 0.266667, 1)

[node name="ColorRect5" type="ColorRect" parent="."]
offset_left = -3.0
offset_top = -284.0
offset_right = 3.0
offset_bottom = 383.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="Page_thickness" type="Node2D" parent="."]
position = Vector2(-3, -236)

[node name="thickness_behaviour" type="Node" parent="Page_thickness"]
script = SubResource("GDScript_pixat")

[node name="left" type="Node2D" parent="Page_thickness"]

[node name="01" type="ColorRect" parent="Page_thickness/left"]
offset_left = -592.0
offset_top = -48.0
offset_right = -590.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="02" type="ColorRect" parent="Page_thickness/left"]
offset_left = -589.0
offset_top = -48.0
offset_right = -587.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="03" type="ColorRect" parent="Page_thickness/left"]
offset_left = -586.0
offset_top = -48.0
offset_right = -584.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="04" type="ColorRect" parent="Page_thickness/left"]
offset_left = -583.0
offset_top = -48.0
offset_right = -581.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="05" type="ColorRect" parent="Page_thickness/left"]
offset_left = -580.0
offset_top = -48.0
offset_right = -578.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="06" type="ColorRect" parent="Page_thickness/left"]
offset_left = -577.0
offset_top = -48.0
offset_right = -575.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="right" type="Node2D" parent="Page_thickness"]
position = Vector2(1192, 0)

[node name="01" type="ColorRect" parent="Page_thickness/right"]
offset_left = -580.0
offset_top = -48.0
offset_right = -578.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="02" type="ColorRect" parent="Page_thickness/right"]
offset_left = -583.0
offset_top = -48.0
offset_right = -581.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="03" type="ColorRect" parent="Page_thickness/right"]
offset_left = -586.0
offset_top = -48.0
offset_right = -584.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="04" type="ColorRect" parent="Page_thickness/right"]
offset_left = -589.0
offset_top = -48.0
offset_right = -587.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="05" type="ColorRect" parent="Page_thickness/right"]
offset_left = -592.0
offset_top = -48.0
offset_right = -590.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="06" type="ColorRect" parent="Page_thickness/right"]
offset_left = -595.0
offset_top = -48.0
offset_right = -593.0
offset_bottom = 619.0
mouse_filter = 2
color = Color(0.0588235, 0.141176, 0.145098, 1)

[node name="ColorRect6" type="ColorRect" parent="."]
visible = false
offset_left = -571.0
offset_top = -274.0
offset_right = -536.0
offset_bottom = -236.0
mouse_filter = 2
color = Color(0.47451, 0.439216, 0.380392, 1)

[node name="Label" type="Label" parent="ColorRect6"]
layout_mode = 0
offset_left = 13.0
offset_right = 25.0
offset_bottom = 38.0
theme_override_font_sizes/font_size = 25
text = "I"

[node name="Pages_all" type="Node2D" parent="."]

[node name="Page_01" type="Node2D" parent="Pages_all"]
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_01"]

[node name="Quest_01" type="Node2D" parent="Pages_all/Page_01/left"]
position = Vector2(-537, -625)
rotation = -0.201687

[node name="Objectif" type="ColorRect" parent="Pages_all/Page_01/left/Quest_01"]
offset_left = -21.0188
offset_top = 7.95074
offset_right = 306.981
offset_bottom = 194.951
color = Color(0.517647, 0.482353, 0.419608, 1)

[node name="text" type="Label" parent="Pages_all/Page_01/left/Quest_01/Objectif"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0.368627, 0.341176, 0.290196, 1)
theme_override_font_sizes/font_size = 30
text = "Find the apicula
"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 1
clip_text = true

[node name="Label_left" type="Label" parent="Pages_all/Page_01/left"]
offset_left = -321.0
offset_top = -99.0
offset_right = -264.0
offset_bottom = 41.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "1"

[node name="right" type="Node2D" parent="Pages_all/Page_01"]

[node name="Label_right" type="Label" parent="Pages_all/Page_01/right"]
offset_left = 241.0
offset_top = -99.0
offset_right = 298.0
offset_bottom = 41.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "1"

[node name="Page_02" type="Node2D" parent="Pages_all"]
visible = false
material = SubResource("ShaderMaterial_jrkpn")
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_02"]

[node name="Label_left" type="Label" parent="Pages_all/Page_02/left"]
offset_left = -321.0
offset_top = -99.0
offset_right = -264.0
offset_bottom = 181.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "2

"

[node name="right" type="Node2D" parent="Pages_all/Page_02"]
position = Vector2(0, 266)

[node name="Label_right" type="Label" parent="Pages_all/Page_02/right"]
offset_left = 241.0
offset_top = -365.0
offset_right = 298.0
offset_bottom = -221.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "2

"

[node name="Page_03" type="Node2D" parent="Pages_all"]
visible = false
material = SubResource("ShaderMaterial_jrkpn")
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_03"]

[node name="Label_left" type="Label" parent="Pages_all/Page_03/left"]
offset_left = -321.0
offset_top = -101.0
offset_right = -264.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "3
"

[node name="right" type="Node2D" parent="Pages_all/Page_03"]

[node name="Label_right" type="Label" parent="Pages_all/Page_03/right"]
offset_left = 241.0
offset_top = -101.0
offset_right = 298.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "3
"

[node name="Page_04" type="Node2D" parent="Pages_all"]
visible = false
material = SubResource("ShaderMaterial_jrkpn")
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_04"]

[node name="Label_left" type="Label" parent="Pages_all/Page_04/left"]
offset_left = -321.0
offset_top = -101.0
offset_right = -264.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "4
"

[node name="right" type="Node2D" parent="Pages_all/Page_04"]

[node name="Label_right" type="Label" parent="Pages_all/Page_04/right"]
offset_left = 241.0
offset_top = -101.0
offset_right = 298.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "4
"

[node name="Page_05" type="Node2D" parent="Pages_all"]
visible = false
material = SubResource("ShaderMaterial_jrkpn")
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_05"]

[node name="Label_left" type="Label" parent="Pages_all/Page_05/left"]
offset_left = -321.0
offset_top = -101.0
offset_right = -264.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "5
"

[node name="right" type="Node2D" parent="Pages_all/Page_05"]

[node name="Label_right" type="Label" parent="Pages_all/Page_05/right"]
offset_left = 241.0
offset_top = -101.0
offset_right = 298.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "5
"

[node name="Page_06" type="Node2D" parent="Pages_all"]
visible = false
material = SubResource("ShaderMaterial_jrkpn")
position = Vector2(0, 421)

[node name="left" type="Node2D" parent="Pages_all/Page_06"]

[node name="Label_left" type="Label" parent="Pages_all/Page_06/left"]
offset_left = -321.0
offset_top = -101.0
offset_right = -264.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "6
"

[node name="right" type="Node2D" parent="Pages_all/Page_06"]

[node name="Label_right" type="Label" parent="Pages_all/Page_06/right"]
offset_left = 241.0
offset_top = -101.0
offset_right = 298.0
offset_bottom = 39.0
theme_override_colors/font_color = Color(0.423529, 0.392157, 0.337255, 1)
theme_override_font_sizes/font_size = 50
text = "6
"

[node name="PAGE_RENDER" type="TextureRect" parent="."]
offset_left = -963.0
offset_top = -517.0
offset_right = 957.0
offset_bottom = 563.0
scale = Vector2(0.927, 0.883)
pivot_offset = Vector2(960, 540)
mouse_filter = 2
texture = SubResource("ViewportTexture_sbgpn")
expand_mode = 1

[node name="Button_Next_page" type="TextureButton" parent="."]
offset_top = -238.0
offset_right = 613.0
offset_bottom = 382.0

[node name="Button_Previous_page" type="TextureButton" parent="."]
offset_left = -595.0
offset_top = -238.0
offset_right = -3.0
offset_bottom = 382.0

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(-2, -322.75)
shape = SubResource("RectangleShape2D_1sju8")

[node name="Inside_book_area" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Inside_book_area"]
visible = false
position = Vector2(9, 77)
shape = SubResource("RectangleShape2D_5xv1b")

[node name="SubViewport" type="SubViewport" parent="."]
transparent_bg = true
size = Vector2i(1920, 1080)

[node name="Camera3D" type="Camera3D" parent="SubViewport"]
transform = Transform3D(-4.37114e-08, -1, -4.37114e-08, 0, -4.37114e-08, 1, -1, 4.37114e-08, 1.91069e-15, -0.163026, 8.80176, 0)
cull_mask = 2
fov = 25.0

[node name="Page_flip_right" parent="SubViewport" instance=ExtResource("1_1pirv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0291206)

[node name="Page_flip_left" parent="SubViewport" instance=ExtResource("1_1pirv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, -1, 0, 0, 0)

[connection signal="timeout" from="WaitforTurn_page/Timer" to="WaitforTurn_page" method="_on_timer_timeout"]
[connection signal="pressed" from="Button_Next_page" to="Pages_Behaviour" method="_on_button_next_2_pressed"]
[connection signal="pressed" from="Button_Previous_page" to="Pages_Behaviour" method="_on_button_previous_page_pressed"]
[connection signal="mouse_entered" from="Area2D" to="Slide" method="_on_area_2d_mouse_entered"]
[connection signal="mouse_exited" from="Area2D" to="Slide" method="_on_area_2d_mouse_exited"]
[connection signal="area_shape_entered" from="Inside_book_area" to="Parent_to_book" method="_on_inside_book_area_area_shape_entered"]
[connection signal="area_shape_exited" from="Inside_book_area" to="Parent_to_book" method="_on_inside_book_area_area_shape_exited"]
