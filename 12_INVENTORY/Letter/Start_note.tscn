[gd_scene load_steps=19 format=3 uid="uid://cjgga2j23u4wl"]

[sub_resource type="GDScript" id="GDScript_w53jh"]
script/source = "extends Node

@onready var label = $\"../Label\"
@onready var label_2 = $\"../Label2\"

func _update_words(_words : String, _from : String):
	label.text = _words
	label_2.text = _from	
"

[sub_resource type="GDScript" id="GDScript_np607"]
script/source = "extends Node

@export var scale_in_loupe = 1.5
@onready var control = $\"..\"

var size : float

@export var object_center_marge : Vector2
@onready var take_it_button = $\"../Take_it_button\"

func _ready():
	
	size = control.scale.x
	
	if _global_datas.Npc_Dialogue != null:
		_Zoom_Object(true)
		
	if _global_datas.Player_InSubScene:
		_Zoom_Object(true)
	


func _Zoom_Object(condition:bool):
	
	if condition:
		_scale_change(size * scale_in_loupe)

		var select_parent = _global_datas.In_Front_Node
		control.reparent(select_parent)
		control.move_to_front()
		_global_datas.Open_ui_dark_backdrop.emit(true)
	else:
		_scale_change(size)
		_global_datas._show_object_legend.emit(false,\"\")

	take_it_button.grab_focus()
		
		
		
func _scale_change(value):
	
	control.set_scale(Vector2(value,value))

func _take_it():
	_Zoom_Object(false)
	_global_datas.Open_ui_dark_backdrop.emit(false)
	_global_datas._show_dialogue_box.emit()
	control.queue_free()


func _on_take_it_button_pressed():
	_take_it()
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_puuhu"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_bgxp4"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_nbbnl"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_vwehn"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_f8kkv"]

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_53eg5"]
constant = 0.4

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_6nv15"]
constant = 1.0

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_6eq8q"]
size = Vector2(724.789, 654.559)
expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_uquas"]
constant = Color(0.98551, 0.77733, 0.57116, 1)

[sub_resource type="VisualShaderNodeStep" id="VisualShaderNodeStep_co8rp"]

[sub_resource type="Gradient" id="Gradient_754lt"]
offsets = PackedFloat32Array(0, 0.966337, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 1, 0.212305, 0.212305, 0.212305, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_5b6u3"]
gradient = SubResource("Gradient_754lt")
fill = 2
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.987179, 0.0641026)

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_i2yly"]
texture = SubResource("GradientTexture2D_5b6u3")

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_e5esv"]
function = 31

[sub_resource type="VisualShader" id="VisualShader_nra2i"]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform sampler2D tex_frg_7;



void fragment() {
// ColorConstant:5
	vec4 n_out5p0 = vec4(0.985510, 0.777330, 0.571160, 1.000000);


// Texture2D:7
	vec4 n_out7p0 = texture(tex_frg_7, UV);


// FloatFunc:8
	float n_out8p0 = 1.0 - n_out7p0.x;


// FloatConstant:3
	float n_out3p0 = 1.000000;


// FloatConstant:2
	float n_out2p0 = 0.400000;


	float n_out4p0;
// Expression:4
	n_out4p0 = 0.0;
	{
		const float DITHER_THRESHOLDS[16] ={
				1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
				13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
				4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
				16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
			};
			
		vec2 uv = FRAGCOORD.xy * n_out2p0;
		int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
		n_out4p0 = n_out3p0 - DITHER_THRESHOLDS[index];
	}


// Step:6
	float n_out6p0 = step(n_out8p0, n_out4p0);


// Output:0
	COLOR.rgb = vec3(n_out5p0.xyz);
	COLOR.a = n_out6p0;


}
"
graph_offset = Vector2(-1222.74, -92.749)
mode = 1
flags/light_only = false
nodes/fragment/2/node = SubResource("VisualShaderNodeFloatConstant_53eg5")
nodes/fragment/2/position = Vector2(-1020, 940)
nodes/fragment/3/node = SubResource("VisualShaderNodeFloatConstant_6nv15")
nodes/fragment/3/position = Vector2(-1020, 800)
nodes/fragment/4/node = SubResource("VisualShaderNodeExpression_6eq8q")
nodes/fragment/4/position = Vector2(-720, 920)
nodes/fragment/4/size = Vector2(724.789, 654.559)
nodes/fragment/4/input_ports = "0,0,In;1,0,Size;"
nodes/fragment/4/output_ports = "0,0,Dither_Node;"
nodes/fragment/4/expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"
nodes/fragment/5/node = SubResource("VisualShaderNodeColorConstant_uquas")
nodes/fragment/5/position = Vector2(20, -100)
nodes/fragment/6/node = SubResource("VisualShaderNodeStep_co8rp")
nodes/fragment/6/position = Vector2(40, 100)
nodes/fragment/7/node = SubResource("VisualShaderNodeTexture_i2yly")
nodes/fragment/7/position = Vector2(-680, -60)
nodes/fragment/8/node = SubResource("VisualShaderNodeFloatFunc_e5esv")
nodes/fragment/8/position = Vector2(-260, 80)
nodes/fragment/connections = PackedInt32Array(2, 0, 4, 1, 3, 0, 4, 0, 4, 0, 6, 1, 7, 0, 8, 0, 8, 0, 6, 0, 6, 0, 0, 1, 5, 0, 0, 0)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8xb81"]
shader = SubResource("VisualShader_nra2i")

[node name="Start_note" type="Node2D"]
rotation = -1.5708

[node name="Update_words" type="Node" parent="."]
script = SubResource("GDScript_w53jh")

[node name="Take_object" type="Node" parent="."]
script = SubResource("GDScript_np607")
object_center_marge = Vector2(153, 190)

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -108.0
offset_top = -191.0
offset_right = 141.0
offset_bottom = 217.0
color = Color(0.519531, 0.484375, 0.421875, 1)

[node name="Label" type="Label" parent="."]
offset_left = 139.0
offset_top = -190.0
offset_right = 546.0
offset_bottom = 56.0
rotation = 1.57079
theme_override_colors/font_color = Color(0.301961, 0.278431, 0.235294, 1)
theme_override_font_sizes/font_size = 30
text = "\" Rendez-vous at the lighthouse \""
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="Label2" type="Label" parent="."]
offset_left = -38.0
offset_top = 70.0
offset_right = 108.0
offset_bottom = 137.0
rotation = 1.57079
theme_override_colors/font_color = Color(0.301961, 0.278431, 0.235294, 1)
theme_override_font_sizes/font_size = 25
text = "M.Apart"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="Take_it_button" type="Button" parent="."]
offset_left = -108.0
offset_top = -191.0
offset_right = 141.0
offset_bottom = 217.0
theme_override_styles/normal = SubResource("StyleBoxEmpty_puuhu")
theme_override_styles/hover = SubResource("StyleBoxEmpty_bgxp4")
theme_override_styles/pressed = SubResource("StyleBoxEmpty_nbbnl")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_vwehn")
theme_override_styles/focus = SubResource("StyleBoxEmpty_f8kkv")

[node name="Select_border" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_8xb81")
offset_left = -108.0
offset_top = -191.0
offset_right = 140.0
offset_bottom = 217.0
mouse_filter = 2

[connection signal="pressed" from="Take_it_button" to="Take_object" method="_on_take_it_button_pressed"]
