[gd_scene load_steps=15 format=3 uid="uid://cjgga2j23u4wl"]

[ext_resource type="Script" path="res://12_INVENTORY/Letter/Move_note.gd" id="1_ksak5"]
[ext_resource type="Shader" uid="uid://bbxdwa2b412rx" path="res://12_INVENTORY/Letter/Start_note_OnOver_sh.tres" id="2_lymtg"]
[ext_resource type="Shader" uid="uid://c38pab15ywxmh" path="res://12_INVENTORY/Letter/Start_note_sh.tres" id="3_0anhr"]

[sub_resource type="GDScript" id="GDScript_w53jh"]
script/source = "extends Node

@onready var label = $\"../Label\"
@onready var label_2 = $\"../Label2\"

func _update_words(_words : String, _from : String):
	label.text = _words
	label_2.text = _from	
"

[sub_resource type="GDScript" id="GDScript_np607"]
script/source = "extends Node
@onready var start_note = $\"..\"

@onready var control = $\"..\"

@onready var on_over = $\"../On_Over\"


var t
var r

var lock : bool = false

func _on_take_it_button_pressed():
	move()
	
	
func move():
	on_over.visible = false
	lock = true
	
	var resolution : Vector2 = start_note.get_viewport_rect().size
	
	var target_position = Vector2(resolution.x+100, resolution.y/ 2.0)
	var random_angle = randf_range(-6.0, -90.0)

	if t:
		t.kill()
		
	t = create_tween()
	t.tween_property(start_note,\"position\",target_position,0.3).set_trans(Tween.TRANS_SINE)
	t.connect(\"finished\",done)
	
	if r:
		r.kill()
		
	r = create_tween()
	r.tween_property(start_note,\"rotation_degrees\",random_angle,0.3).set_trans(Tween.TRANS_SINE)	
	
func done():
	control.queue_free()	
	_global_datas._show_dialogue_box.emit()



func _on_take_it_button_mouse_entered():
	if lock:
		return
	on_over.visible = true


func _on_take_it_button_mouse_exited():
	if lock:
		return
	on_over.visible = false
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lj5fv"]
shader = ExtResource("2_lymtg")

[sub_resource type="Gradient" id="Gradient_xeln1"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_qyyf2"]
gradient = SubResource("Gradient_xeln1")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_viuge"]
shader = ExtResource("3_0anhr")
shader_parameter/Gradient = SubResource("GradientTexture2D_qyyf2")

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_puuhu"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_bgxp4"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_nbbnl"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_vwehn"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_f8kkv"]

[node name="Start_note" type="Control"]
layout_mode = 3
anchors_preset = 0
script = ExtResource("1_ksak5")

[node name="Update_words" type="Node" parent="."]
script = SubResource("GDScript_w53jh")

[node name="Take_object" type="Node" parent="."]
script = SubResource("GDScript_np607")

[node name="On_Over" type="ColorRect" parent="."]
visible = false
material = SubResource("ShaderMaterial_lj5fv")
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -214.0
offset_top = 133.0
offset_right = 65.0
offset_bottom = 563.0
grow_horizontal = 2
grow_vertical = 2
rotation = -1.5708
color = Color(0.886275, 0.764706, 0.580392, 1)

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_viuge")
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -195.0
offset_top = 121.0
offset_right = 55.0
offset_bottom = 521.0
grow_horizontal = 2
grow_vertical = 2
rotation = -1.5708
color = Color(0.807843, 0.780392, 0.733333, 1)

[node name="Label" type="Label" parent="."]
layout_mode = 0
offset_left = -199.0
offset_top = -133.0
offset_right = 198.0
offset_bottom = 118.0
theme_override_colors/font_color = Color(0.301961, 0.278431, 0.235294, 1)
theme_override_font_sizes/font_size = 26
text = "\" Rendez-vous at the lighthouse \""
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="Label2" type="Label" parent="."]
layout_mode = 0
offset_left = 144.0
offset_top = 80.0
offset_right = 197.0
offset_bottom = 118.0
theme_override_colors/font_color = Color(0.301961, 0.278431, 0.235294, 1)
theme_override_font_sizes/font_size = 26
text = "A"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="Take_it_button" type="Button" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_top = -0.037
anchor_bottom = -0.037
offset_left = -201.0
offset_top = -132.0
offset_right = 200.0
offset_bottom = 118.0
theme_override_styles/normal = SubResource("StyleBoxEmpty_puuhu")
theme_override_styles/hover = SubResource("StyleBoxEmpty_bgxp4")
theme_override_styles/pressed = SubResource("StyleBoxEmpty_nbbnl")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_vwehn")
theme_override_styles/focus = SubResource("StyleBoxEmpty_f8kkv")

[connection signal="mouse_entered" from="Take_it_button" to="Take_object" method="_on_take_it_button_mouse_entered"]
[connection signal="mouse_exited" from="Take_it_button" to="Take_object" method="_on_take_it_button_mouse_exited"]
[connection signal="pressed" from="Take_it_button" to="Take_object" method="_on_take_it_button_pressed"]
