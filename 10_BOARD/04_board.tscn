[gd_scene load_steps=77 format=3 uid="uid://cein0q2eirkay"]

[ext_resource type="Script" path="res://13_TOOLS_UI/set_Resolution_viewports.gd" id="1_g3pi7"]
[ext_resource type="Script" path="res://10_BOARD/Board_CamTarget.gd" id="1_janbq"]
[ext_resource type="Script" path="res://10_BOARD/Active_3D_BoardScene.gd" id="1_n6a4y"]
[ext_resource type="Resource" uid="uid://5fjsfr4toudr" path="res://08_SUBSCENES/Tools/Main_tool/Open_Board.tres" id="1_qgjbu"]
[ext_resource type="Script" path="res://10_BOARD/Input_switch.gd" id="2_00g5f"]
[ext_resource type="PackedScene" uid="uid://dr73p5vs0sixe" path="res://10_BOARD/board_scene.tscn" id="2_6c571"]
[ext_resource type="Script" path="res://10_BOARD/Cam_focus.gd" id="6_7tgl6"]
[ext_resource type="Material" uid="uid://5qv6cc3a63nt" path="res://05_SHADER_TEST/Full_screen/04_board_simple_disolved.tres" id="7_fiqjo"]
[ext_resource type="Script" path="res://10_BOARD/Set_state_call.gd" id="7_m8teq"]
[ext_resource type="Script" path="res://10_BOARD/Information_manager.gd" id="7_v3hdy"]
[ext_resource type="Script" path="res://10_BOARD/Set_focus_data.gd" id="9_2ajy3"]
[ext_resource type="Script" path="res://10_BOARD/Zoom_state.gd" id="9_8at4f"]
[ext_resource type="Script" path="res://10_BOARD/Json_reader_test.gd" id="9_tfybn"]
[ext_resource type="Script" path="res://14_ON_SCANNER_PHOTO/Show_OnScanner.gd" id="10_354m8"]
[ext_resource type="Script" path="res://14_ON_SCANNER_PHOTO/Fade_scanner.gd" id="11_2x7ah"]
[ext_resource type="Resource" uid="uid://dyh1qg1u652pl" path="res://15_GAME_RESSOURCE/Epave_ch_photoData.tres" id="11_ldr1y"]
[ext_resource type="Script" path="res://10_BOARD/TurnScanner.gd" id="12_2daja"]
[ext_resource type="Resource" uid="uid://3pilop3f4m6r" path="res://15_GAME_RESSOURCE/03_BoardCam_state/ScannerM_focus_data.tres" id="13_87a1q"]
[ext_resource type="Script" path="res://10_BOARD/Board_OBJ_Manager.gd" id="14_johxk"]
[ext_resource type="Resource" uid="uid://blxuee4l6ey2g" path="res://10_BOARD/Board_OBJ_data/Map_data.tres" id="15_6vhht"]
[ext_resource type="Resource" uid="uid://cvrp1lkxdf4md" path="res://15_GAME_RESSOURCE/03_BoardCam_state/Book_focus_data.tres" id="15_a7u4q"]
[ext_resource type="Script" path="res://10_BOARD/Next_scanner_input.gd" id="16_l7ebl"]
[ext_resource type="Resource" uid="uid://ctxrmh1elpnm1" path="res://15_GAME_RESSOURCE/Follower_photoData.tres" id="17_mbuj8"]
[ext_resource type="Resource" uid="uid://dlm0knnql1e6h" path="res://15_GAME_RESSOURCE/Ghost_Scanner_photoData.tres" id="18_aukda"]
[ext_resource type="Resource" uid="uid://bcid58kxecbk2" path="res://15_GAME_RESSOURCE/Maurice_photoData.tres" id="19_8dlfp"]
[ext_resource type="Script" path="res://10_BOARD/Switch_Cursor_icon.gd" id="19_t6o6e"]
[ext_resource type="Resource" uid="uid://cooqi0giysm3w" path="res://15_GAME_RESSOURCE/MrBirs_photoData.tres" id="20_0rbh6"]
[ext_resource type="PackedScene" uid="uid://b4hspc8dsyv14" path="res://08_SUBSCENES/Elements/Tiny_boat/scene_boat_ch_test.tscn" id="20_60dek"]
[ext_resource type="Texture2D" uid="uid://bb53vqhy3jx8j" path="res://10_BOARD/00_BOOK/01_UI/cursor_eyes.png" id="20_cuebq"]
[ext_resource type="Script" path="res://10_BOARD/Follow_cursor.gd" id="20_vjjnn"]
[ext_resource type="Resource" uid="uid://dm0uus2gow50q" path="res://15_GAME_RESSOURCE/Otis_photoData.tres" id="21_ko3r3"]
[ext_resource type="Texture2D" uid="uid://d1kttlfg1wwvk" path="res://10_BOARD/00_BOOK/01_UI/cursor_Circle.png" id="21_qhnbf"]
[ext_resource type="Script" path="res://00_SCENE/Board_control_object_test/Clic_raycast.gd" id="23_osxq7"]
[ext_resource type="Resource" uid="uid://cd5pseveq582t" path="res://15_GAME_RESSOURCE/03_BoardCam_state/Main_focus_data.tres" id="24_pisk2"]
[ext_resource type="Script" path="res://00_SCENE/Board_control_object_test/Movable_manager.gd" id="24_tox7b"]
[ext_resource type="Script" path="res://10_BOARD/Select_intrigue.gd" id="27_qyfnp"]
[ext_resource type="Resource" uid="uid://cyu7mo6v7aaij" path="res://15_GAME_RESSOURCE/03_BoardCam_state/Board_focus_data.tres" id="27_vvxtf"]
[ext_resource type="Resource" uid="uid://b2bkxyfxws3e3" path="res://15_GAME_RESSOURCE/02_BOARD_INFO/Board_intrigue/Chapitre_I.tres" id="28_bli5v"]
[ext_resource type="Resource" uid="uid://cjwmwf4frvq3c" path="res://15_GAME_RESSOURCE/03_BoardCam_state/BoardZoom_focus_data.tres" id="28_njdgu"]
[ext_resource type="Resource" uid="uid://jx3jbwgl8gm0" path="res://15_GAME_RESSOURCE/02_BOARD_INFO/Board_intrigue/Chapitre_II.tres" id="29_fp4yn"]
[ext_resource type="Resource" uid="uid://qo6th56oqlhi" path="res://15_GAME_RESSOURCE/02_BOARD_INFO/Board_intrigue/Chapitre_III.tres" id="30_difyj"]
[ext_resource type="Resource" uid="uid://dsi20xus8cnkw" path="res://15_GAME_RESSOURCE/02_BOARD_INFO/Board_intrigue/Chapitre_IV.tres" id="31_g1wpo"]
[ext_resource type="Resource" uid="uid://dlqqpo5rncbhs" path="res://15_GAME_RESSOURCE/03_BoardCam_state/Board_Element_focus_data.tres" id="35_wjkn0"]
[ext_resource type="Script" path="res://10_BOARD/Element_infos.gd" id="38_p1kbf"]
[ext_resource type="PackedScene" uid="uid://bh5a7fhvftxmm" path="res://10_BOARD/00_BOOK/02_Book_information/00_Book_journal.tscn" id="38_xp1m1"]

[sub_resource type="GDScript" id="GDScript_w13ry"]
script/source = "extends Node

@export var Board_tool : tool_data
@export var debug_board = true



func _ready():
	_global_datas.Player_In_Inventory = debug_board
	_global_datas.open_inventory.connect(open_inventory)
	Board_tool.tool_active_signal.connect(open_inventory)

func open_inventory(condition : bool):
	if !condition:
		_global_datas.show_on_scanner.emit(false)
		_global_datas.show_ui_scanner_dots.emit(false)	
		
		_global_datas.current_scene_state = game_state.scene_state._Main
	else:
		_global_datas._add_back_call.emit(_back_call)
		#_global_datas.show_on_scanner.emit(true)
		
		_global_datas.current_scene_state = game_state.scene_state._Boardscene
		
func _back_call():
	_global_datas.Player_In_Inventory = false
	_global_datas.open_inventory.emit(false)
	
"

[sub_resource type="GDScript" id="GDScript_1a2yk"]
script/source = "extends Node




func _input(event):
	

	if _global_datas.Player_InMenu:
		return
	
	if _global_datas.Player_InDialogue:
		return
		
	if _global_datas.Player_InSubScene:
		return
	
	if event.is_action_pressed(\"Open_Inventory\"):
		_global_datas.Player_In_Inventory = ! _global_datas.Player_In_Inventory
		_global_datas.open_inventory.emit(_global_datas.Player_In_Inventory)	
		
"

[sub_resource type="GDScript" id="GDScript_52477"]
script/source = "extends Node

@onready var board_ui = $\"../3D_SCENE/RENDER\"
@onready var material : Material = board_ui.get_material()

var fade_in
var fade_value: float
func _ready():
	_global_datas.open_inventory.connect(open_inventory)
	material.set_shader_parameter(\"Opacity\",0.0)
	
func open_inventory(condition : bool):
		
	if condition:

		_global_datas.show_3D_BoardScene.emit(true)
		if fade_in:
			fade_in.kill()
		
		fade_in = create_tween()
		fade_in.tween_method(set_shader_value,0.0,1.0,0.5)
		fade_in.connect(\"finished\",end_fadeIn)
	else:
		_global_datas.show_3D_MainScene.emit(true)
		
		if fade_in:
			fade_in.kill()
		
		fade_in = create_tween()
		fade_in.tween_method(set_shader_value,fade_value,0.0,0.5)
		fade_in.connect(\"finished\",_disable_viewport)
		

func _disable_viewport():
	_global_datas.show_3D_BoardScene.emit(false)
func end_fadeIn():
	_global_datas.show_3D_MainScene.emit(false)	

func set_shader_value(value):
	material.set_shader_parameter(\"Opacity\",value)
	fade_value = value
"

[sub_resource type="ViewportTexture" id="ViewportTexture_gpfe8"]
viewport_path = NodePath("3D_SCENE/SubViewport")

[sub_resource type="VisualShaderNodeStep" id="VisualShaderNodeStep_5dsty"]

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_mk6l5"]
parameter_name = "Dither_size"
qualifier = 1

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_cjrkd"]
size = Vector2(724.789, 654.559)
expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_mt86t"]
parameter_name = "Opacity"
hint = 1
default_value_enabled = true
default_value = 0.5

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_hryqf"]
input_name = "color"

[sub_resource type="VisualShader" id="VisualShader_7x25n"]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform float Opacity : hint_range(0, 1) = 0.5;



void fragment() {
// Input:9
	vec4 n_out9p0 = COLOR;


// FloatParameter:5
	float n_out5p0 = Opacity;


// Output:0
	COLOR.rgb = vec3(n_out9p0.xyz);
	COLOR.a = n_out5p0;


}
"
graph_offset = Vector2(-446.087, -175.571)
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2(680, 140)
nodes/fragment/2/node = SubResource("VisualShaderNodeStep_5dsty")
nodes/fragment/2/position = Vector2(260, 200)
nodes/fragment/5/node = SubResource("VisualShaderNodeFloatParameter_mt86t")
nodes/fragment/5/position = Vector2(-440, 460)
nodes/fragment/9/node = SubResource("VisualShaderNodeInput_hryqf")
nodes/fragment/9/position = Vector2(740, -640)
nodes/fragment/32/node = SubResource("VisualShaderNodeFloatParameter_mk6l5")
nodes/fragment/32/position = Vector2(-1289.82, 1091.99)
nodes/fragment/34/node = SubResource("VisualShaderNodeExpression_cjrkd")
nodes/fragment/34/position = Vector2(-809.816, 871.99)
nodes/fragment/34/size = Vector2(724.789, 654.559)
nodes/fragment/34/input_ports = "0,0,In;1,0,Size;"
nodes/fragment/34/output_ports = "0,0,Dither_Node;"
nodes/fragment/34/expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"
nodes/fragment/connections = PackedInt32Array(9, 0, 0, 0, 32, 0, 34, 1, 5, 0, 34, 0, 5, 0, 0, 1, 34, 0, 2, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pfnxx"]
shader = SubResource("VisualShader_7x25n")
shader_parameter/Opacity = 0.0

[sub_resource type="VisualShaderNodeStep" id="VisualShaderNodeStep_3q8mc"]

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_q6ooe"]
size = Vector2(724.789, 654.559)
expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_jwllk"]
parameter_name = "Opacity"
hint = 1
default_value_enabled = true
default_value = 0.5

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_6ng33"]
parameter_name = "Dither_size"
qualifier = 1

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_wh4is"]
input_name = "texture"

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_qr5as"]
expanded_output_ports = [0]
source = 5

[sub_resource type="VisualShaderNodeMix" id="VisualShaderNodeMix_gtw5f"]

[sub_resource type="VisualShader" id="VisualShader_evyyy"]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform float Opacity : hint_range(0, 1) = 0.5;
global uniform float Dither_size;



void fragment() {
	vec4 n_out77p0;
// Texture2D:77
	n_out77p0 = texture(TEXTURE, UV);
	float n_out77p4 = n_out77p0.a;


// FloatParameter:39
	float n_out39p0 = Opacity;


// FloatParameter:69
	float n_out69p0 = Dither_size;


	float n_out37p0;
// Expression:37
	n_out37p0 = 0.0;
	{
		const float DITHER_THRESHOLDS[16] ={
				1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
				13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
				4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
				16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
			};
			
		vec2 uv = FRAGCOORD.xy * n_out69p0;
		int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
		n_out37p0 = n_out39p0 - DITHER_THRESHOLDS[index];
	}


// Step:35
	float n_in35p0 = 0.00000;
	float n_out35p0 = step(n_in35p0, n_out37p0);


// Mix:80
	float n_in80p0 = 0.00000;
	float n_out80p0 = mix(n_in80p0, n_out77p4, n_out35p0);


// Output:0
	COLOR.rgb = vec3(n_out77p0.xyz);
	COLOR.a = n_out80p0;


}
"
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2(2060, -260)
nodes/fragment/35/node = SubResource("VisualShaderNodeStep_3q8mc")
nodes/fragment/35/position = Vector2(1080, 560)
nodes/fragment/37/node = SubResource("VisualShaderNodeExpression_q6ooe")
nodes/fragment/37/position = Vector2(40, 500)
nodes/fragment/37/size = Vector2(724.789, 654.559)
nodes/fragment/37/input_ports = "0,0,In;1,0,Size;"
nodes/fragment/37/output_ports = "0,0,Dither_Node;"
nodes/fragment/37/expression = "const float DITHER_THRESHOLDS[16] ={
		1.0 / 17.0, 9.0 / 17.0, 3.0 / 17.0, 11.0 / 17.0,
		13.0 / 17.0, 5.0 / 17.0, 15.0 / 17.0, 7.0 / 17.0,
		4.0 / 17.0, 12.0 / 17.0, 2.0 / 17.0, 10.0 / 17.0,
		16.0 / 17.0, 8.0 / 17.0, 14.0 / 17.0, 6.0 / 17.0
	};
	
vec2 uv = FRAGCOORD.xy * Size;
int index = (int(uv.x) % 4) * 4 + int(uv.y) % 4;
Dither_Node = In - DITHER_THRESHOLDS[index];"
nodes/fragment/39/node = SubResource("VisualShaderNodeFloatParameter_jwllk")
nodes/fragment/39/position = Vector2(-320, 220)
nodes/fragment/69/node = SubResource("VisualShaderNodeFloatParameter_6ng33")
nodes/fragment/69/position = Vector2(-420, 660)
nodes/fragment/76/node = SubResource("VisualShaderNodeInput_wh4is")
nodes/fragment/76/position = Vector2(440, -660)
nodes/fragment/77/node = SubResource("VisualShaderNodeTexture_qr5as")
nodes/fragment/77/position = Vector2(1060, -540)
nodes/fragment/80/node = SubResource("VisualShaderNodeMix_gtw5f")
nodes/fragment/80/position = Vector2(1480, 40)
nodes/fragment/connections = PackedInt32Array(39, 0, 37, 0, 37, 0, 35, 1, 69, 0, 37, 1, 76, 0, 77, 2, 35, 0, 80, 2, 80, 0, 0, 1, 77, 0, 0, 0, 77, 4, 80, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_noh2t"]
shader = SubResource("VisualShader_evyyy")
shader_parameter/Opacity = 1.0

[sub_resource type="ViewportTexture" id="ViewportTexture_qrcca"]
viewport_path = NodePath("3D_SCENE/SubViewport_scanner")

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_yrkdd"]
size = Vector2(513.781, 284.487)
expression = "vec2 n_uv = UV -0.5;
float d = length(n_uv);
float c = smoothstep(r,r + feather,d);
color = vec4(vec3(c),1.0);"

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_fxvjj"]
input_name = "uv"

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_xdogs"]
constant = 0.5

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_wb6mp"]

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_evu1d"]
function = 31

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_5pf1n"]
constant = 0.1

[sub_resource type="VisualShader" id="VisualShader_elssd"]
code = "shader_type canvas_item;
render_mode blend_mix;




void fragment() {
// Input:3
	vec2 n_out3p0 = UV;


// FloatConstant:4
	float n_out4p0 = 0.500000;


// FloatConstant:5
	float n_out5p0 = 0.000000;


	vec4 n_out2p0;
// Expression:2
	n_out2p0 = vec4(0.0, 0.0, 0.0, 0.0);
	{
		vec2 n_uv = n_out3p0 -0.5;
		float d = length(n_uv);
		float c = smoothstep(n_out4p0,n_out4p0 + n_out5p0,d);
		n_out2p0 = vec4(vec3(c),1.0);
	}


// FloatFunc:6
	float n_out6p0 = 1.0 - n_out2p0.x;


// Output:0
	COLOR.a = n_out6p0;


}
"
graph_offset = Vector2(-507.845, 108.253)
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2(820, 140)
nodes/fragment/2/node = SubResource("VisualShaderNodeExpression_yrkdd")
nodes/fragment/2/position = Vector2(-82.4779, 287.841)
nodes/fragment/2/size = Vector2(513.781, 284.487)
nodes/fragment/2/input_ports = "0,3,UV;1,0,r;2,0,feather;"
nodes/fragment/2/output_ports = "0,5,color;"
nodes/fragment/2/expression = "vec2 n_uv = UV -0.5;
float d = length(n_uv);
float c = smoothstep(r,r + feather,d);
color = vec4(vec3(c),1.0);"
nodes/fragment/3/node = SubResource("VisualShaderNodeInput_fxvjj")
nodes/fragment/3/position = Vector2(-482.478, 227.841)
nodes/fragment/4/node = SubResource("VisualShaderNodeFloatConstant_xdogs")
nodes/fragment/4/position = Vector2(-362.478, 387.841)
nodes/fragment/5/node = SubResource("VisualShaderNodeFloatConstant_wb6mp")
nodes/fragment/5/position = Vector2(-282.478, 487.841)
nodes/fragment/6/node = SubResource("VisualShaderNodeFloatFunc_evu1d")
nodes/fragment/6/position = Vector2(654.179, 36.3039)
nodes/fragment/7/node = SubResource("VisualShaderNodeFloatConstant_5pf1n")
nodes/fragment/7/position = Vector2(57.5221, -12.1591)
nodes/fragment/connections = PackedInt32Array(3, 0, 2, 0, 4, 0, 2, 1, 5, 0, 2, 2, 2, 0, 6, 0, 6, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_blt4p"]
shader = SubResource("VisualShader_elssd")

[sub_resource type="SphereMesh" id="SphereMesh_ycnm1"]

[sub_resource type="PrismMesh" id="PrismMesh_2j3nk"]

[node name="04_BOARD" type="Node"]
script = SubResource("GDScript_w13ry")
Board_tool = ExtResource("1_qgjbu")
debug_board = false
metadata/_edit_horizontal_guides_ = [-58.0]

[node name="Information_manager" type="Node" parent="."]
script = ExtResource("7_v3hdy")

[node name="Board_info_reader_class" type="Node" parent="Information_manager"]
script = ExtResource("9_tfybn")

[node name="Open_Inventory" type="Node" parent="."]
script = SubResource("GDScript_1a2yk")

[node name="set_Resolution" type="Node" parent="." node_paths=PackedStringArray("viewports")]
script = ExtResource("1_g3pi7")
viewports = [NodePath("../3D_SCENE/SubViewport")]

[node name="Input_switch" type="Node" parent="."]
script = ExtResource("2_00g5f")

[node name="Active_3D_scene" type="Node" parent="." node_paths=PackedStringArray("viewports")]
script = ExtResource("1_n6a4y")
viewports = [NodePath("../3D_SCENE/SubViewport"), NodePath("../3D_SCENE/SubViewport_scanner")]

[node name="Fade" type="Node" parent="."]
script = SubResource("GDScript_52477")

[node name="Cam_focus" type="Node" parent="." node_paths=PackedStringArray("all_Cam", "focus_target")]
script = ExtResource("6_7tgl6")
all_Cam = [NodePath("../3D_SCENE/Camera_xray"), NodePath("../3D_SCENE/SubViewport/Camera3D_Main"), NodePath("../3D_SCENE/SubViewport_scanner/Camera3D_Scanner")]
focus_target = NodePath("../3D_SCENE/CamTarget")

[node name="Set_state_call" type="Node" parent="Cam_focus"]
script = ExtResource("7_m8teq")

[node name="Zoom_state" type="Node" parent="Cam_focus"]
script = ExtResource("9_8at4f")
main_state = ExtResource("24_pisk2")
board_state = ExtResource("27_vvxtf")
board_zoom_state = ExtResource("28_njdgu")

[node name="TurnScanner_and_zoom" type="Node" parent="Cam_focus" node_paths=PackedStringArray("Cam_to_move", "Cam_to_move_scanner")]
script = ExtResource("12_2daja")
Cam_ref_scanner = ExtResource("13_87a1q")
Cam_ref_Book = ExtResource("15_a7u4q")
Cam_to_move = NodePath("../../3D_SCENE/SubViewport/Camera3D_Main")
Cam_to_move_scanner = NodePath("../../3D_SCENE/SubViewport_scanner/Camera3D_Scanner")

[node name="Next_scanner_input" type="Node" parent="Cam_focus"]
script = ExtResource("16_l7ebl")
all_scanner = Array[Resource("res://12_INVENTORY/Photo/Photo_data.gd")]([ExtResource("11_ldr1y"), ExtResource("17_mbuj8"), ExtResource("18_aukda"), ExtResource("19_8dlfp"), ExtResource("20_0rbh6"), ExtResource("21_ko3r3")])

[node name="Clic_raycast" type="Node" parent="." node_paths=PackedStringArray("Camera", "pad_target")]
script = ExtResource("23_osxq7")
Camera = NodePath("../3D_SCENE/Camera_xray")
pad_target = NodePath("../3D_SCENE/Pad_target")

[node name="Movable_manager" type="Node" parent="Clic_raycast"]
script = ExtResource("24_tox7b")

[node name="Board_OBJ_Manager" type="Node" parent="."]
script = ExtResource("14_johxk")
all_object_list = Array[Resource("res://10_BOARD/Board_OBJ_data/object_data.gd")]([ExtResource("15_6vhht")])

[node name="Select_intrigue" type="Node" parent="."]
script = ExtResource("27_qyfnp")
all_intrigue = Array[Resource("res://15_GAME_RESSOURCE/02_BOARD_INFO/Board_intrigue/Board_intrigue_data.gd")]([ExtResource("28_bli5v"), ExtResource("29_fp4yn"), ExtResource("30_difyj"), ExtResource("31_g1wpo")])

[node name="Show_OnScanner" type="Node" parent="."]
script = ExtResource("10_354m8")
scanner_first_data = ExtResource("11_ldr1y")

[node name="Fade" type="Node" parent="Show_OnScanner"]
script = ExtResource("11_2x7ah")

[node name="3D_SCENE" type="Node3D" parent="."]

[node name="Camera_state" type="Node3D" parent="3D_SCENE"]

[node name="Camera_OnBoard" type="Camera3D" parent="3D_SCENE/Camera_state"]
transform = Transform3D(1, 0, 0, 0, 0.642788, 0.766044, 0, -0.766044, 0.642788, 0, 0.48, 0.49)
cull_mask = 2
fov = 40.0
script = ExtResource("9_2ajy3")
focus_data = ExtResource("27_vvxtf")

[node name="Camera_OnBoard_zoom" type="Camera3D" parent="3D_SCENE/Camera_state"]
transform = Transform3D(1, 0, 0, 0, 0.34202, 0.939693, 0, -0.939693, 0.34202, 0, 0.232, 0.214)
cull_mask = 2
fov = 40.0
script = ExtResource("9_2ajy3")
focus_data = ExtResource("28_njdgu")

[node name="Camera_OnElement_focus" type="Camera3D" parent="3D_SCENE/Camera_state"]
transform = Transform3D(1, 0, 0, 0, 0.939693, 0.34202, 0, -0.34202, 0.939693, 0, 0.135, 0.1)
cull_mask = 2
fov = 40.0
script = ExtResource("9_2ajy3")
focus_data = ExtResource("35_wjkn0")

[node name="Camera_OnMain" type="Camera3D" parent="3D_SCENE/Camera_state"]
transform = Transform3D(0.994881, 0.0700724, -0.072816, 0, 0.720551, 0.693402, 0.101056, -0.689852, 0.716862, -0.08, 0.945, 1.035)
cull_mask = 2
fov = 40.0
script = ExtResource("9_2ajy3")
focus_data = ExtResource("24_pisk2")

[node name="Camera_xray" type="Camera3D" parent="3D_SCENE"]
transform = Transform3D(0.994881, 0.0700724, -0.072816, 0, 0.720551, 0.693402, 0.101056, -0.689852, 0.716862, -0.08, 0.945, 1.035)
cull_mask = 0
current = true
fov = 40.0
far = 4.25

[node name="SubViewport" type="SubViewport" parent="3D_SCENE"]
handle_input_locally = false
scaling_3d_scale = 0.9
size = Vector2i(1920, 1080)

[node name="Camera3D_Main" type="Camera3D" parent="3D_SCENE/SubViewport"]
transform = Transform3D(0.994881, 0.0700724, -0.072816, 0, 0.720551, 0.693402, 0.101056, -0.689852, 0.716862, -0.08, 0.945, 1.035)
cull_mask = 2
current = true
fov = 40.0
far = 10.0

[node name="BOOK" parent="3D_SCENE/SubViewport/Camera3D_Main" instance=ExtResource("38_xp1m1")]
transform = Transform3D(7.06954e-17, -1.61732e-09, -0.037, -0.037, -1.61732e-09, 0, -1.61732e-09, 0.037, -1.61732e-09, 0, -0.004, -0.148)
visible = false

[node name="SubViewport_scanner" type="SubViewport" parent="3D_SCENE"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1920, 1080)

[node name="Camera3D_Scanner" type="Camera3D" parent="3D_SCENE/SubViewport_scanner"]
transform = Transform3D(0.994881, 0.0700724, -0.072816, 0, 0.720551, 0.693402, 0.101056, -0.689852, 0.716862, -0.08, 0.945, 1.035)
cull_mask = 128
current = true
fov = 40.0
far = 5.0

[node name="RENDER" type="TextureRect" parent="3D_SCENE"]
material = ExtResource("7_fiqjo")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("ViewportTexture_gpfe8")
expand_mode = 3

[node name="Element_infos" type="Control" parent="3D_SCENE"]
layout_mode = 3
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -443.0
offset_top = -271.0
offset_right = -84.0
offset_bottom = 135.0
grow_horizontal = 0
grow_vertical = 0
rotation = 0.091541

[node name="Element_info_update" type="Node" parent="3D_SCENE/Element_infos" node_paths=PackedStringArray("info_text")]
script = ExtResource("38_p1kbf")
info_text = NodePath("../Info_text")

[node name="ColorRect" type="ColorRect" parent="3D_SCENE/Element_infos"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.545098, 0.509804, 0.439216, 1)

[node name="Info_text" type="Label" parent="3D_SCENE/Element_infos"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 19.0
offset_top = 26.0
offset_right = -24.0
offset_bottom = -151.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0.317647, 0.262745, 0.156863, 1)
theme_override_font_sizes/font_size = 21
text = "Lorem ipusm info textfffffffffffffffffffffffffffffff"
autowrap_mode = 3

[node name="BACKDROP_FOCUS" type="ColorRect" parent="3D_SCENE"]
material = SubResource("ShaderMaterial_pfnxx")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.0705882, 0.12549, 0.129412, 1)

[node name="RENDER_Scanner" type="TextureRect" parent="3D_SCENE"]
material = SubResource("ShaderMaterial_noh2t")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = SubResource("ViewportTexture_qrcca")
expand_mode = 3

[node name="Pad_target" type="ColorRect" parent="3D_SCENE"]
visible = false
material = SubResource("ShaderMaterial_blt4p")
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -10.0
offset_right = 5.0
offset_bottom = 5.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.89, 0.89)
mouse_filter = 2
color = Color(0.721569, 0.635294, 0.439216, 1)

[node name="Board_scene" parent="3D_SCENE" instance=ExtResource("2_6c571")]

[node name="CamTarget" type="Node3D" parent="3D_SCENE"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.125)
script = ExtResource("1_janbq")
min_x = -1.0
max_x = 1.0
min_z = -0.5
max_z = 0.5

[node name="MeshInstance3D" type="MeshInstance3D" parent="3D_SCENE/CamTarget"]
transform = Transform3D(0.0354637, 0, 0, 0, 0.0354637, 0, 0, 0, 0.0354637, 0, 0, 0)
visible = false
layers = 2
mesh = SubResource("SphereMesh_ycnm1")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="3D_SCENE/CamTarget"]
transform = Transform3D(0.0176783, 0, 0, 0, -7.72744e-10, 0.0176783, 0, -0.0176783, -7.72744e-10, 0, 0.017216, 0)
visible = false
layers = 2
mesh = SubResource("PrismMesh_2j3nk")

[node name="Scanner_light" type="OmniLight3D" parent="3D_SCENE"]
transform = Transform3D(0.999998, 0.00205949, 0, -0.00205949, 0.999998, 0, 0, 0, 1, 0.022, 0.186, -0.114)
layers = 128
omni_range = 0.240332

[node name="Loader" type="Node3D" parent="3D_SCENE"]
transform = Transform3D(1.39903, 0.00288128, 0, -0.00288128, 1.39903, 0, 0, 0, 1.39903, 0.0214805, 0.0542918, -0.121138)

[node name="Scene_boat_ch_test" parent="3D_SCENE/Loader" instance=ExtResource("20_60dek")]
transform = Transform3D(0.0133498, 1.81899e-12, 0, 0, 0.0133497, 0, 0, 0, 0.0133498, -2.22074e-05, 0.0107834, 0)
visible = false

[node name="Cursor_icon" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Switch_Cursor_icon" type="Node" parent="Cursor_icon"]
script = ExtResource("19_t6o6e")

[node name="Follow_cursor" type="Node" parent="Cursor_icon"]
script = ExtResource("20_vjjnn")

[node name="Icon_circle" type="Sprite2D" parent="Cursor_icon"]
visible = false
modulate = Color(0.0235294, 0.129412, 0.137255, 1)
position = Vector2(21, -14)
scale = Vector2(0.145649, 0.145649)
texture = ExtResource("21_qhnbf")

[node name="Icon_sh" type="Sprite2D" parent="Cursor_icon"]
visible = false
modulate = Color(0.0235294, 0.129412, 0.137255, 1)
position = Vector2(24, -15)
scale = Vector2(0.119691, 0.119691)
texture = ExtResource("20_cuebq")

[node name="Icon_render" type="Sprite2D" parent="Cursor_icon"]
position = Vector2(23.6249, -16.3751)
scale = Vector2(0.12207, 0.12207)
texture = ExtResource("20_cuebq")

[connection signal="set_state_call" from="Cam_focus" to="Cam_focus/Set_state_call" method="_set_state_call"]
