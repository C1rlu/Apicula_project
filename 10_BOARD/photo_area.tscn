[gd_scene load_steps=13 format=3 uid="uid://uwg2qc3svu11"]

[ext_resource type="Resource" uid="uid://bcid58kxecbk2" path="res://12_INVENTORY/Photo/Maurice_photoData.tres" id="1_2tgng"]
[ext_resource type="Script" path="res://10_BOARD/Assign_legend_page.gd" id="2_7tt1s"]
[ext_resource type="Script" path="res://10_BOARD/00_BOOK/Show_this_page.gd" id="2_653je"]
[ext_resource type="Script" path="res://10_BOARD/Take_Object.tres.gd" id="3_0e5dt"]
[ext_resource type="Shader" uid="uid://upo0fuo5sqgd" path="res://05_SHADER_TEST/Board/Board_sh.tres" id="3_ysgwd"]
[ext_resource type="Texture2D" uid="uid://38btbw60olcn" path="res://12_INVENTORY/Photo/IMG/Boat.png" id="7_2ylay"]

[sub_resource type="GDScript" id="GDScript_2oe2p"]
script/source = "extends Area3D

@export var photo_data : PhotoData
@export var legend_node : Node3D
@export var is_a_scanner : bool = true
@onready var collision_shape_3d = $CollisionShape3D
@onready var mesh_instance_3d_7 = $MeshInstance3D7


@onready var select_this = $Select_this


func _ready():
	_disable_object()
	
	if !is_a_scanner:
		select_this.free()
			
func _active():
	collision_shape_3d.disabled = false	
	mesh_instance_3d_7.visible = true

	
	if legend_node:
		legend_node.enable_legend.emit(true)

func _disable_object():
	
	collision_shape_3d.disabled = true
	mesh_instance_3d_7.visible = false

	
	if legend_node:
		legend_node.enable_legend.emit(false)

func _on_assign_legend_page_assign_page():
	legend_node.update_legend.emit() 	
	
"

[sub_resource type="GDScript" id="GDScript_32kbr"]
script/source = "extends Node
@onready var photo_area = $\"..\"


#@onready var material : Material = photo_render.get_surface_override_material(0)

@onready var photo_render  : Sprite3D = $\"../photo_render\"

func _ready():
	
	var texture_data = photo_area.photo_data.image
	#material.set_shader_parameter(\"Texture\",texture_data)

	photo_render.texture = texture_data 
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4jhqi"]
render_priority = 0
shader = ExtResource("3_ysgwd")
shader_parameter/Dark_color = Color(0.423529, 0.380392, 0, 1)
shader_parameter/ColorParameter = Color(0.431373, 0.4, 0.309804, 1)
shader_parameter/light_color = Color(0.580392, 0.545098, 0.439216, 1)

[sub_resource type="BoxMesh" id="BoxMesh_8e2mh"]
material = SubResource("ShaderMaterial_4jhqi")

[sub_resource type="BoxShape3D" id="BoxShape3D_mdprb"]
size = Vector3(0.0690674, 0.0105576, 0.0662781)

[sub_resource type="GDScript" id="GDScript_dibr8"]
script/source = "extends CollisionShape3D


@onready var col = $\".\"

func _ready():
	
	_global_datas.photo_fade_out.connect(active)	
	_global_datas.photo_fade_in.connect(disable)	
	
	
func active():
	col.disabled = true
	
func disable():
	col.disabled = false
"

[node name="Photo_area" type="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00272226, 0)
script = SubResource("GDScript_2oe2p")
photo_data = ExtResource("1_2tgng")

[node name="Assign_legend_page" type="Node" parent="."]
script = ExtResource("2_7tt1s")

[node name="Show_this_page" type="Node" parent="."]
script = ExtResource("2_653je")

[node name="Select_this" type="Node" parent="."]
script = ExtResource("3_0e5dt")

[node name="texture" type="Node" parent="."]
script = SubResource("GDScript_32kbr")

[node name="MeshInstance3D7" type="MeshInstance3D" parent="."]
transform = Transform3D(0.0682586, 0, 0, 0, 0.00230959, 0, 0, 0, 0.0682586, 0, 0, 0)
layers = 16384
mesh = SubResource("BoxMesh_8e2mh")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000622556, 0.00481491, -0.000192255)
shape = SubResource("BoxShape3D_mdprb")
disabled = true
script = SubResource("GDScript_dibr8")

[node name="photo_render" type="Sprite3D" parent="."]
transform = Transform3D(0.0116926, 0, 0, 0, 8.27593e-10, 0.0116926, 0, -0.0116926, 8.27593e-10, 0.000372954, 0.00253178, 0)
layers = 16384
texture = ExtResource("7_2ylay")
region_enabled = true
region_rect = Rect2(0, 0, 512, 512)

[connection signal="assign_page" from="Assign_legend_page" to="." method="_on_assign_legend_page_assign_page"]
[connection signal="show_this_page" from="Show_this_page" to="." method="_on_show_this_page_show_this_page"]
[connection signal="on_click" from="Select_this" to="Select_this" method="_on_on_click"]
