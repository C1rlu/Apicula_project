[gd_scene load_steps=12 format=3 uid="uid://uwg2qc3svu11"]

[ext_resource type="Resource" uid="uid://bcid58kxecbk2" path="res://12_INVENTORY/Photo/Maurice_photoData.tres" id="1_2tgng"]
[ext_resource type="Script" path="res://10_BOARD/00_BOOK/Show_this_page.gd" id="2_653je"]
[ext_resource type="Shader" uid="uid://upo0fuo5sqgd" path="res://05_SHADER_TEST/Board/Board_sh.tres" id="3_ysgwd"]
[ext_resource type="Texture2D" uid="uid://38btbw60olcn" path="res://12_INVENTORY/Photo/IMG/Boat.png" id="7_2ylay"]
[ext_resource type="PackedScene" uid="uid://ckin6oiruwreh" path="res://10_BOARD/00_BOOK/Legend/Legend_symbols_prefab.tscn" id="8_dqpog"]

[sub_resource type="GDScript" id="GDScript_2oe2p"]
script/source = "extends Area3D



@export var photo_data : PhotoData

@export var is_a_scanner : bool = true
@onready var collision_shape_3d = $CollisionShape3D
@onready var mesh_instance_3d_7 = $MeshInstance3D7

@onready var legend_prefab = $legend_prefab


func _active():
	collision_shape_3d.disabled = false	
	mesh_instance_3d_7.visible = true
	var book = _global_datas.book_data
	legend_prefab.ini_legend.emit(book,photo_data.page_index)

func _disable_object():
	
	collision_shape_3d.disabled = true
	mesh_instance_3d_7.visible = false


"

[sub_resource type="GDScript" id="GDScript_32kbr"]
script/source = "extends Node


@onready var photo_area = $\"..\"
@onready var photo_render  : Sprite3D = $\"../photo_render\"

func _ready():
	
	var texture_data = photo_area.photo_data.image
	photo_render.texture = texture_data 
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4jhqi"]
render_priority = 0
shader = ExtResource("3_ysgwd")
shader_parameter/Dark_color = Color(0.423529, 0.380392, 0, 1)
shader_parameter/ColorParameter = Color(0.431373, 0.4, 0.309804, 1)
shader_parameter/light_color = Color(0.580392, 0.545098, 0.439216, 1)

[sub_resource type="BoxMesh" id="BoxMesh_8e2mh"]
material = SubResource("ShaderMaterial_4jhqi")

[sub_resource type="BoxShape3D" id="BoxShape3D_mdprb"]
size = Vector3(0.0690674, 0.0105576, 0.0662781)

[sub_resource type="GDScript" id="GDScript_dibr8"]
script/source = "extends CollisionShape3D


@onready var col = $\".\"

func _ready():
	
	_global_datas.photo_fade_out.connect(active)	
	_global_datas.photo_fade_in.connect(disable)	
	
	
func active():
	col.disabled = true
	
func disable():
	col.disabled = false
"

[node name="Photo_area" type="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00272226, 0)
script = SubResource("GDScript_2oe2p")
photo_data = ExtResource("1_2tgng")

[node name="Show_this_page" type="Node" parent="."]
script = ExtResource("2_653je")
book_position_offset = Vector3(0.05, 0, 0.12)

[node name="texture" type="Node" parent="."]
script = SubResource("GDScript_32kbr")

[node name="MeshInstance3D7" type="MeshInstance3D" parent="."]
transform = Transform3D(0.0682586, 0, 0, 0, 0.00230959, 0, 0, 0, 0.0682586, 0, 0, 0)
layers = 16384
mesh = SubResource("BoxMesh_8e2mh")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000622556, 0.00481491, -0.000192255)
shape = SubResource("BoxShape3D_mdprb")
disabled = true
script = SubResource("GDScript_dibr8")

[node name="photo_render" type="Sprite3D" parent="."]
transform = Transform3D(0.0116926, 0, 0, 0, 8.27593e-10, 0.0116926, 0, -0.0116926, 8.27593e-10, 0.000372954, 0.00253178, 0)
layers = 16384
texture = ExtResource("7_2ylay")
region_enabled = true
region_rect = Rect2(0, 0, 512, 512)

[node name="legend_prefab" parent="." instance=ExtResource("8_dqpog")]
transform = Transform3D(0.977467, 0, -0.211086, 0, 1, 0, 0.211086, 0, 0.977467, 0, 0.000268519, 0.0309599)

[connection signal="on_click" from="Show_this_page" to="Show_this_page" method="_on_on_click"]
